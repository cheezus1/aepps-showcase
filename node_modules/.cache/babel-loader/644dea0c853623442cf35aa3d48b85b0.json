{"remainingRequest":"/home/boko/workspace/aepps-showcase/node_modules/babel-loader/lib/index.js!/home/boko/workspace/aepps-showcase/node_modules/eslint-loader/index.js??ref--13-0!/home/boko/workspace/aepps-showcase/src/util/contract_state.js","dependencies":[{"path":"/home/boko/workspace/aepps-showcase/src/util/contract_state.js","mtime":1549019678834},{"path":"/home/boko/workspace/aepps-showcase/node_modules/cache-loader/dist/cjs.js","mtime":1548314526195},{"path":"/home/boko/workspace/aepps-showcase/node_modules/babel-loader/lib/index.js","mtime":1548314526127},{"path":"/home/boko/workspace/aepps-showcase/node_modules/eslint-loader/index.js","mtime":1548314526431}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/boko/workspace/aepps-showcase/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n\nvar Crypto = require('@aeternity/aepp-sdk').Crypto;\n\nvar _require = require('@aeternity/aepp-sdk'),\n    EpochChain = _require.EpochChain,\n    EpochContract = _require.EpochContract;\n\nvar ipfsClient = require('ipfs-http-client');\n\nvar Buffer = require('buffer').Buffer;\n\nvar pendingType = \"map(int, \" + \"(\" + \"(string, string, string, string),\" + \"int,\" + \"int,\" + \"int,\" + \"map(address, (int, int)),\" + \"map(string, (list(address), int))\" + \")\" + \")\";\nvar approvedType = \"map(int, (string, string, string, string))\";\nvar contractAddress = \"ct_2GuYPHhL6RxUq3H3xfB6bZvf7xo1HbshGcXHBR6kcByjGcw4wP\";\nvar ipfs = ipfsClient({\n  host: '172.18.10.1',\n  port: 5001,\n  protocol: 'http'\n});\nipfs.cat('QmU6myacaAqUMm2tdHf9zSkfm5Bf8bwzREyNZk7J1wv84f', {\n  length: 10\n}, function (err, file) {\n  console.log(file);\n});\n\nvar getPending =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee() {\n    var client, pending, decodedPending;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return EpochChain.compose(EpochContract)({\n              url: \"https://sdk-testnet.aepps.com\",\n              internalUrl: \"https://sdk-testnet.aepps.com\"\n            }).catch(console.error);\n\n          case 2:\n            client = _context.sent;\n            _context.next = 5;\n            return client.contractEpochCall(contractAddress, 'sophia-address', 'get_pending', '()').catch(console.error);\n\n          case 5:\n            pending = _context.sent;\n            _context.next = 8;\n            return client.contractEpochDecodeData(pendingType, pending.out).catch(console.error);\n\n          case 8:\n            decodedPending = _context.sent;\n            return _context.abrupt(\"return\", decodedPending);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function getPending() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar pendingToObjects = function pendingToObjects(pending) {\n  var pendingObjects = [];\n  pending.value.forEach(function (p) {\n    var description = p.val.value[0].value[1].value;\n\n    if (description.length > 100) {\n      description = description.substring(0, 100) + \"...\";\n    }\n\n    pendingObjects.push({\n      title: p.val.value[0].value[0].value,\n      description: description,\n      image_binary: p.val.value[0].value[2].value,\n      page_url: p.val.value[0].value[3].value\n    });\n  });\n  return pendingObjects;\n}; // IPFS\n\n\nexport default {\n  getPending: getPending,\n  pendingToObjects: pendingToObjects\n};",{"version":3,"sources":["/home/boko/workspace/aepps-showcase/src/util/contract_state.js"],"names":["Crypto","require","EpochChain","EpochContract","ipfsClient","Buffer","pendingType","approvedType","contractAddress","ipfs","host","port","protocol","cat","length","err","file","console","log","getPending","compose","url","internalUrl","catch","error","client","contractEpochCall","pending","contractEpochDecodeData","out","decodedPending","pendingToObjects","pendingObjects","value","forEach","p","description","val","substring","push","title","image_binary","page_url"],"mappings":"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","sourcesContent":["const Crypto = require('@aeternity/aepp-sdk').Crypto;\nconst {EpochChain, EpochContract} = require('@aeternity/aepp-sdk')\nconst ipfsClient = require('ipfs-http-client')\nconst Buffer = require('buffer').Buffer;\n\nconst pendingType =\n  \"map(int, \" +\n    \"(\" +\n      \"(string, string, string, string),\" +\n      \"int,\" +\n      \"int,\" +\n      \"int,\" +\n      \"map(address, (int, int)),\" +\n      \"map(string, (list(address), int))\" +\n    \")\" +\n  \")\";\nconst approvedType = \"map(int, (string, string, string, string))\";\nconst contractAddress = \"ct_2GuYPHhL6RxUq3H3xfB6bZvf7xo1HbshGcXHBR6kcByjGcw4wP\";\n\nvar ipfs = ipfsClient({ host: '172.18.10.1', port: 5001, protocol: 'http' });\nipfs.cat('QmU6myacaAqUMm2tdHf9zSkfm5Bf8bwzREyNZk7J1wv84f', { length: 10 }, function(err, file) {\n  console.log(file);\n})\n\n\nconst getPending = async () => {\n    let client = await EpochChain.compose(EpochContract)({\n        url: `https://sdk-testnet.aepps.com`,\n        internalUrl: `https://sdk-testnet.aepps.com`,\n    }).catch(console.error);\n\n    const pending = await client.contractEpochCall(contractAddress, 'sophia-address', 'get_pending', '()').catch(console.error);\n    const decodedPending = await client.contractEpochDecodeData(pendingType, pending.out).catch(console.error);\n\n    return decodedPending;\n  }\n\nconst pendingToObjects = (pending) => {\n    let pendingObjects = [];\n    pending.value.forEach(function(p) {\n      var description = p.val.value[0].value[1].value;\n      if(description.length > 100) {\n        description = description.substring(0, 100) + \"...\";\n      }\n\n      pendingObjects.push({\n        title: p.val.value[0].value[0].value,\n        description: description,\n        image_binary: p.val.value[0].value[2].value,\n        page_url: p.val.value[0].value[3].value\n      });\n    });\n\n    return pendingObjects;\n  }\n\n// IPFS\n\nexport default {\n  getPending, pendingToObjects\n}\n"]}]}